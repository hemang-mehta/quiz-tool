{% if user_auth is not none%} {% include 'navbar_after_login.html'%}
{%else%} {% include 'navbar_before_login.html'%}
{% endif %}

<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="static/css/up.css">
        <title>User Page</title>
</head>
<body>
        <div class="welcome">
            <h1 style="color: black;">Welcome {{user_auth}}</h1>
        </div>
        <!-- To display ->
                Number of tests given
                Score achieved on each test
                Average score
                Button to give new test               
        -->
        <table>
                {% set ns = namespace(num_tests=0) %}
                {% set avgs = namespace(avg_score=0) %}
                <div class="difficulty-scores">
                    <span class="difficulty easy">easy</span>
                    <span class="difficulty medium">medium</span>
                    <span class="difficulty hard">hard</span>
                  </div>
                  
                  {% for key, value in user_score_data.test_scores.items() %}
                    <div class="score-data">
                      <span class="score-key">{{ key }}</span>
                      {% set ns.num_tests = ns.num_tests + (value | length) %}
                      {% for item in value %}
                            {{ item }}
                            {% set avgs.avg_score = avgs.avg_score + item %}
                      {% endfor %}
                    </div>
                  {% endfor %}
                  
                <tr>
                    <td colspan="3">Number of tests given -> {{ ns.num_tests }}</td>
                    {% set avgs.avg_score = avgs.avg_score/ns.num_tests %}
                    <td>Average score -> {{avgs.avg_score}}</td>
                </tr>
            </table>
            
            
        
        <button id="startquiz">Give quiz</button>
        <form method='POST'>
            <div id="difficulty_level">
                <button type="submit" name="difficulty_level" value="Easy">Easy</button>
                <button type="submit" name="difficulty_level" value="Medium">Medium</button>
                <button type="submit" name="difficulty_level" value="Hard">Hard</button>
            </div>
        </form>
        </body>
        <script>
                const first_btn = document.getElementById('startquiz')
                const diff_lvl = document.getElementById('difficulty_level')
                first_btn.addEventListener("click", function(){
                        diff_lvl.style.display = "block";
                });
        </script>
</body>
</html>